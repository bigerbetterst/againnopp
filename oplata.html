<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/normalize.min-1.css?_v=20221112121223">
    <link rel="stylesheet" href="css/oplata.min.css?_v=20221112121223">
    <link rel="stylesheet" href="css/header.min-1.css?_v=20221112121223">
    <link rel="stylesheet" href="css/buy.css">
	<link rel="stylesheet" href="css/buy.css">
    <link rel="icon" href="img/logo.png">
    <title>ЛолаШилд - Оплата</title>
  </head>
  <body>
    <!-- <form method="POST" action="php/oplata.php"> -->
    <header class="header">
      <div class="container">
        <div class="header-wraper">
          <div class="header-content">
            <img src="img/logo.png" alt="Royale logo" class="logo-image">
            <nav class="nav">
              <ul class="menu">
                <li class="item-menu">
                  <a href="index.html" class="item-menu-link">Главная</a>
                </li>
                <li class="item-menu">
                  <a href="wiki" class="item-menu-link" target="_blank">Вики</a>
                </li>
                <li class="item-menu">
                  <a href="#" class="item-menu-link" target="_blank">Магазин</a>
                </li>
              </ul>
            </nav>
            <div class="profil-btn-wraper">
            </div>
            <div class="bur-btn"><span></span><span></span><span></span></div>
          </div>
        </div>
      </div>
    </header>
    <div class="wraper">
      <a href="index.html" class="btn-home">
        <img src="img/icon-svg/arrow-left.svg" alt="" class="btn-home-icon">
        Вернуться на главную
      </a>
      <div class="block-oplata active">
        <span class="page-count"></span>
        <div class="oplata-wraper">
          <div class="oplata-content">
            <div class="oplata-header">
              <div class="title-and-logo">
                <img src="img/logo.png" alt="" class="logo">
                <h2 class="title">Заполните необходимую информацию</h2>
              </div>
              <p class="description">
                Для того чтобы зайти на сервер вам необходимо купить
                <span>проходку</span>.<br>
              </p>
            </div>
            <div class="oplata-main">
					<script src="https://api.trademc.org/trademcapi.js"></script>
<div id="label-text">
<script>TrademcAPI.GetBuyForm({"Shop":"196678","Title":"Покупка товара","Nickname":"Ваш никнейм ","Item":"Выберите товар","Coupon":"Промокод (если имеется)","Button":"К оплате","Success_URL":"https://lolashield.fun/successfully","Pending_URL":"https://trademc.org","Fail_URL":"https://trademc.org","PastPlaceID":"label-text"});</script>
                    </div>
					                <div class="label-input">
                  <label>
                    <div class="label-text">
                      <span class="label-title">Не забудьте вступить в дискорд:</span>
                    </div>
                    <div class="discord-wraper">

                      <a href="discord" target="_blank" class="login-discord" onclick="discordVisit()">
                        Зайти в дискорд
                        <img src="img/icon-svg/arrowr.jpg" alt="" class="discrod-btn-icon">
                      </a>
                    </div>
                  </label>
                </div>

                <div class="footer-btn">
                  <button class="back-btn" onclick="#emergeeka_oknol">
                   <a href="#emergeeka_oknol"><font color="#FF77FF">Правила покупки</a></span>
                  </button>
                  <button class="oplata-btn" onclick="oplata()">
                     <a href="#infotovar"><font color="#FF77FF">Информация о товарах</a></span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
					                

  <div id="emergeeka_oknol" class="emerge">
  <div class="vsplevsu_anemagen">
  <div class="emergena_konsuksua">
  <div class="kamages_designes">
 <div style=”margin-right:14px;”> <img src="img/rules.png"></img></div>
  <a href="#overcas" title="overcas" class="overcas">×</a>
  </div>
  <p class="opisaniye_okoshke">
               <font color="black">Мы не несём ответственность за ввод вашего никнейма и
                в случае ошибки не будем его изменять.<br><br>
				               Если вы попробуете купить НИТРО на ник игрока, который ни разу
                не заходил на сервер, то оно попросту не выдастся.<br><br>
				                Мы можем вернуть вам деньги за проходку, если
                вы купили её менее 12 часов назад и не сломали/поставили ни единого блока, не забрали ни единого предмета в инвентарь.<br><br>
				               95% денег с пожертвований на "НИТРО" и "ПРОХОДКА"
               идут на развитие сервера и оплату хостинга.
  </div>
  </div>
  </div>
  </div>
  </div>
  
   <div id="infotovar" class="emerge">
  <div class="vsplevsu_anemagen">
  <div class="emergena_konsuksua">
  <div class="kamages_designes">
 <div style=”margin-right:14px;”> <img src="img/info.png"></img></div>
  <a href="#overcas" title="overcas" class="overcas">×</a>
  </div>
  <p class="opisaniye_okoshke">
               <font color="black"><b>Проходка</b><br>
                • Выдаётся на один сезон<br>
				• Используется для входа на сервер<br>
				• После покупки вас моментально добавляет в вайтлист<br><br>
				               <b>ЛолаШилд Нитро</b><br>
                • Уникальный префикс в табе, чате и над головой красивым шрифтом<br>
• Возможность включить себе подсветку в игре (/glow)<br>
• Приоритетный режим в игре (вход на сервер, даже если он заполнен)<br>
• Возможность заходить на ивент-мир после начала ивента ИЛИ два вторых шанса на ивенте (на выбор каждый ивент)<br>
• Возможность выдать одному игроку (другу) проходку<br>
• Получите благодарность и уважение от администрации
  </div>
  </div>
  </div>
  </div>
  </div>
    <!-- </form> -->
  </body>
  <script src="js/warning-profil.min-1.js?_v=20221112121223"></script>
  <!-- <script src="js/oplata-form.js"></script> -->
   <script src="vendor/swiper/swiper-bundle.min.js"></script>
  <script src="jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
  <script type="text/javascript">
    const mainForm = document.querySelector(".main-form");
const radioForm = document.querySelector(".radio-form");

const blocksOplata = document.querySelectorAll(".block-oplata");

const inputsValidate = document.querySelectorAll(".input-wraper input");
const discordLinkEl = document.querySelector(".login-discord");

let discordLink = false; // режим разработчика

const discordVisit = () => {
  discordLink = true;
  discordLinkEl.classList.add("valid");
};

inputsValidate.forEach((inputValidate) => {
  inputValidate.addEventListener("input", (e) => {
    const value = e.target.value;

    if (value.trim()) {
      inputValidate.closest(".input-wraper").classList.add("valid");
    } else {
      inputValidate.closest(".input-wraper").classList.remove("valid");
    }
  });
});

const inputs = document.querySelectorAll("input");

mainForm.addEventListener("submit", (e) => {
  e.preventDefault();
});

radioForm.addEventListener("submit", (e) => {
  e.preventDefault();
});

console.log(blocksOplata);

const setSlide = (slideNum) => {
  blocksOplata[0].classList.remove("active");
  blocksOplata[1].classList.remove("active");

  blocksOplata[slideNum].classList.add("active");
};
var rate1;
const oplata = () => {
  let values = [];
  inputs.forEach((input) => {
    const obj = {
      name: input.getAttribute("name"),
      value: input.value,
    };
    if (input.checked) {
      obj.value = input.value;
    }

    if (input.name !== "rate") {
      values.push(obj);
    } else if (input.checked)  {
      values.push(obj);
      // console.log(obj.value);
      rate1 = obj.value; // rate value
    }
  });

  if (
    !values.find(
      (item) =>
        !item.value &&
        item.name !== "promo" &&
        item.name !== "email"
    ) &&
    discordLink
  ) {
    // console.log(values);

    var sid = 43226; // server id
    var success = "https://royalerp.ru"; // Success url after buy
    var customer = document.getElementById("nickname").value;
    var email = document.getElementById("email").value;
    var promo = document.getElementById("promo").value;
      if(promo == ""){
      // https://easydonate.ru/api/v3/shop/payment/create?customer="+customer+"&server_id="+sid+"&products={\""+rate1+"\":1}&email="+email+"&success_url="+success
          window.location.replace("./php/pay.php?customer="+customer+"&server_id="+sid+"&products="+rate1+"&email="+email+"&success_url="+success);
      }else{
          window.location.replace("./php/pay.php?customer="+customer+"&server_id="+sid+"&products="+rate1+"&email="+email+"&success_url="+success+"&coupon="+promo);
      }
        } else {
          alert("Заполните все поля");
        }
      };

  </script>
</html>
